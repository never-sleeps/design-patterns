Вариант с собственной реализацией интерфейса Iterator.